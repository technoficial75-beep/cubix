<!DOCTYPE html>
<html lang="sk">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico?v=2">
    <meta charset="UTF-8">
    <title>Cubix | Store</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ≈†t√Ωly pre Store */
        .store-header { padding: 40px 0; text-align: center; }
        .store-title { font-size: 3rem; font-weight: 800; margin-bottom: 15px; color: #ffca28; }
        .store-subtitle { color: #8b949e; font-size: 1.1rem; max-width: 600px; margin: 0 auto 40px; }

        .category-nav { 
            display: flex; 
            justify-content: center; 
            gap: 15px; 
            margin-bottom: 50px; 
            flex-wrap: wrap;
        }
        
        .category-btn {
            background: #161b22;
            border: 1px solid #30363d;
            padding: 10px 25px;
            border-radius: 30px;
            color: #fff;
            cursor: pointer;
            transition: 0.3s;
            font-weight: 600;
        }

        .category-btn:hover, .category-btn.active {
            border-color: #ffca28;
            background: rgba(255, 202, 40, 0.1);
            color: #ffca28;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 60px;
        }

        .product-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-10px);
            border-color: #ffca28;
            box-shadow: 0 15px 30px rgba(255, 202, 40, 0.1);
        }

        .product-icon { font-size: 3.5rem; margin-bottom: 20px; }
        
        .product-name { font-size: 1.5rem; font-weight: 700; margin-bottom: 10px; }
        
        .product-price { 
            font-size: 1.8rem; 
            font-weight: 800; 
            color: #ffca28; 
            margin: 15px 0; 
        }

        .buy-btn {
            background: #ffca28;
            color: #000;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: 800;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            margin-top: auto;
        }

        .buy-btn:hover {
            background: #ffe082;
            transform: scale(1.05);
        }

        /* --- IDENTICK√â ≈†T√ùLY Z INDEXU --- */
        .cart-wrapper { position: relative; margin-left: 15px; cursor: pointer; }

        /* UPRAVEN√ù KO≈†√çK PODƒΩA OBR√ÅZKA */
        .cart-badge { 
            position: absolute; 
            top: -8px; 
            right: -8px; 
            background: #ff5252; /* ƒåerven√° farba z obr√°zka */
            color: white; 
            font-size: 0.75rem; 
            font-weight: 800; 
            padding: 2px 6px; 
            border-radius: 50%; 
            display: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            border: 1px solid #161b22; /* Kont√∫ra pre oddelenie od pozadia */
        }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); }
        .modal-content { background: #161b22; margin: 10% auto; padding: 30px; border: 1px solid #30363d; border-radius: 15px; width: 90%; max-width: 500px; color: #fff; position: relative; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; background: #0d1117; padding: 10px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #30363d; }
        .close-modal { float: right; cursor: pointer; color: #8b949e; font-size: 1.5rem; }
        .checkout-btn { display: inline-block; width: 100%; padding: 12px; background: #2ed573; color: white; text-decoration: none; border-radius: 8px; font-weight: 700; transition: 0.3s; text-transform: uppercase; text-align: center; border: none; cursor: pointer; }
        
        .lang-menu { display: flex; gap: 10px; margin-left: 15px; align-items: center; border-left: 1px solid #30363d; padding-left: 15px; }
        .lang-flag { width: 28px; height: 18px; object-fit: cover; border-radius: 4px; cursor: pointer; opacity: 0.4; transition: 0.3s; border: 2px solid transparent; }
        .lang-flag.active { opacity: 1; border-color: #009dff; }
    </style>
</head>
<body>

<div id="cartModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('cartModal')">&times;</span>
        <h2 style="margin-bottom: 20px;"><i class="fas fa-shopping-cart" style="color:#ffca28"></i> <span data-lang="cart_title">Ko≈°√≠k</span></h2>
        <div id="cartItemsContainer"></div>
        <div id="cartTotalDisplay" style="text-align: right; font-weight: 800; margin-top: 20px; border-top: 1px solid #30363d; padding-top: 10px;">Total: 0.00 ‚Ç¨</div>
        <button class="checkout-btn" style="margin-top: 20px;" onclick="alert('Checkout system integration')" data-lang="btn_buy_now">ZAPLATI≈§</button>
    </div>
</div>

<header>
    <div class="container header-wrap">
        <a href="index.html" class="logo"><img src="cubixtext.png" alt="Logo"></a>
        <div style="display: flex; align-items: center;">
            <ul class="nav-links">
                <li><a href="index.html"><i class="fas fa-home"></i> <span data-lang="nav_home">Domov</span></a></li>
                <li><a href="pravidla.html"><i class="fas fa-book"></i> <span data-lang="nav_rules">Pravidl√°</span></a></li>
                <li><a href="team.html"><i class="fas fa-users"></i> <span data-lang="nav_team">T√≠m</span></a></li>
                <li><a href="nabory.html"><i class="fas fa-user-plus"></i> <span data-lang="nav_staff">N√°bory</span></a></li>
                <li><a href="hlasovanie.html"><i class="fas fa-check-square"></i> <span data-lang="nav_vote">Hlasovanie</span></a></li>
                <li><a href="store.html" class="active" style="color: #ffca28;"><i class="fas fa-shopping-cart"></i> <span data-lang="nav_store">Store</span></a></li>
            </ul>

            <div class="cart-wrapper" onclick="openCart()">
                <i class="fas fa-shopping-basket" style="font-size: 1.2rem; color: #ffca28;"></i>
                <span class="cart-badge" id="cartBadge">0</span>
            </div>

            <div class="lang-menu">
                <img src="https://flagcdn.com/w80/sk.png" class="lang-flag" id="lang-sk" onclick="setLang('sk')" title="Slovenƒçina">
                <img src="https://flagcdn.com/w80/cz.png" class="lang-flag" id="lang-cz" onclick="setLang('cz')" title="ƒåe≈°tina">
                <img src="https://flagcdn.com/w80/gb.png" class="lang-flag" id="lang-en" onclick="setLang('en')" title="English">
            </div>
        </div>
    </div>
</header>

<main class="container">
    <section class="store-header">
        <h1 class="store-title" data-lang="store_title">Server Store</h1>
        <p class="store-subtitle" data-lang="store_subtitle">Podpor n√°≈° server a z√≠skaj unik√°tne v√Ωhody, ranky a kozmetick√© doplnky.</p>
        
        <div class="category-nav">
            <button class="category-btn active" data-lang="cat_all">V≈°etko</button>
            <button class="category-btn">Ranks</button>
            <button class="category-btn">Keys</button>
            <button class="category-btn">Other</button>
        </div>
    </section>

    <div class="products-grid" id="productsGrid">
        </div>
</main>

<script>
    const translations = {
        sk: {
            nav_home: "Domov", nav_rules: "Pravidl√°", nav_team: "T√≠m", nav_staff: "N√°bory", nav_vote: "Hlasovanie", nav_store: "Store",
            store_title: "Obchod", store_subtitle: "Podpor server Cubix a z√≠skaj ≈°peci√°lne v√Ωhody v hre.",
            cat_all: "V≈°etko", btn_add: "Prida≈• do ko≈°√≠ka", btn_buy_now: "ZAPLATI≈§",
            cart_title: "Ko≈°√≠k", cart_empty: "Tvoj ko≈°√≠k je pr√°zdny.", btn_checkout: "POKLAD≈áA"
        },
        cz: {
            nav_home: "Dom≈Ø", nav_rules: "Pravidla", nav_team: "T√Ωm", nav_staff: "N√°bory", nav_vote: "Hlasov√°n√≠", nav_store: "Store",
            store_title: "Obchod", store_subtitle: "Podpo≈ô server Cubix a z√≠skej speci√°ln√≠ v√Ωhody ve h≈ôe.",
            cat_all: "V≈°e", btn_add: "P≈ôidat do ko≈°√≠ku", btn_buy_now: "ZAPLATIT",
            cart_title: "Ko≈°√≠k", cart_empty: "Tv≈Øj ko≈°√≠k je pr√°zdn√Ω.", btn_checkout: "POKLADNA"
        },
        en: {
            nav_home: "Home", nav_rules: "Rules", nav_team: "Staff", nav_staff: "Recruitment", nav_vote: "Vote", nav_store: "Store",
            store_title: "Store", store_subtitle: "Support Cubix server and get special in-game advantages.",
            cat_all: "All", btn_add: "Add to cart", btn_buy_now: "PAY NOW",
            cart_title: "Cart", cart_empty: "Your cart is empty.", btn_checkout: "CHECKOUT"
        }
    };

    const currencyConfig = {
        sk: { symbol: "‚Ç¨", rate: 1, decimals: 2, pos: 'after' },
        cz: { symbol: "Kƒç", rate: 25, decimals: 0, pos: 'after' },
        en: { symbol: "$", rate: 1.05, decimals: 2, pos: 'before' }
    };

    const products = [
        { id: 1, name: "VIP Rank", price: 5.00, icon: "üíé" },
        { id: 2, name: "VIP+ Rank", price: 10.00, icon: "üëë" },
        { id: 3, name: "MVP Rank", price: 20.00, icon: "üî•" },
        { id: 4, name: "Unban", price: 15.00, icon: "üîì" },
        { id: 5, name: "5x Mythic Key", price: 4.50, icon: "üóùÔ∏è" },
        { id: 6, name: "Legendary Crate", price: 2.50, icon: "üì¶" }
    ];

    let cart = JSON.parse(localStorage.getItem('cubix_cart')) || [];

    function renderProducts() {
        const grid = document.getElementById('productsGrid');
        const lang = localStorage.getItem('selectedLanguage') || 'sk';
        grid.innerHTML = '';

        products.forEach(p => {
            grid.innerHTML += `
                <div class="product-card">
                    <div class="product-icon">${p.icon}</div>
                    <div class="product-name">${p.name}</div>
                    <div class="product-price">${formatPrice(p.price, lang)}</div>
                    <button class="buy-btn" onclick="addToCart(${p.id})">${translations[lang].btn_add}</button>
                </div>
            `;
        });
    }

    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        cart.push(product);
        localStorage.setItem('cubix_cart', JSON.stringify(cart));
        updateCartBadge();
        
        const btn = event.target;
        const originalText = btn.innerText;
        btn.innerText = "‚úì";
        setTimeout(() => btn.innerText = originalText, 1000);
    }

    function updateCartBadge() {
        const badge = document.getElementById('cartBadge');
        badge.innerText = cart.length;
        badge.style.display = cart.length > 0 ? 'block' : 'none';
    }

    function formatPrice(euroAmount, lang) {
        const conf = currencyConfig[lang];
        const converted = (euroAmount * conf.rate).toFixed(conf.decimals);
        return conf.pos === 'before' ? `${conf.symbol}${converted}` : `${converted} ${conf.symbol}`;
    }

    function openCart() {
        const modal = document.getElementById('cartModal');
        const container = document.getElementById('cartItemsContainer');
        const lang = localStorage.getItem('selectedLanguage') || 'sk';
        
        container.innerHTML = '';
        let total = 0;

        if (cart.length === 0) {
            container.innerHTML = `<p style="text-align:center; color:#8b949e;">${translations[lang].cart_empty}</p>`;
        } else {
            cart.forEach((item, index) => {
                total += item.price;
                container.innerHTML += `
                    <div class="cart-item">
                        <span>${item.name}</span>
                        <div>
                            <span style="font-weight:700; color:#ffca28; margin-right:10px;">${formatPrice(item.price, lang)}</span>
                            <i class="fas fa-trash" onclick="removeFromCart(${index})" style="cursor:pointer; color:#ff4757"></i>
                        </div>
                    </div>`;
            });
        }
        document.getElementById('cartTotalDisplay').innerText = "Total: " + formatPrice(total, lang);
        modal.style.display = 'block';
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        localStorage.setItem('cubix_cart', JSON.stringify(cart));
        updateCartBadge();
        openCart();
    }

    function closeModal(id) {
        document.getElementById(id).style.display = 'none';
    }

    function setLang(langId) {
        localStorage.setItem('selectedLanguage', langId);
        updateUI(langId);
        renderProducts();
    }

    function updateUI(langId) {
        document.querySelectorAll('.lang-flag').forEach(flag => flag.classList.remove('active'));
        const selected = document.getElementById('lang-' + langId);
        if (selected) selected.classList.add('active');

        document.querySelectorAll('[data-lang]').forEach(element => {
            const key = element.getAttribute('data-lang');
            if (translations[langId][key]) {
                element.innerText = translations[langId][key];
            }
        });
    }

    window.onload = function() {
        const savedLang = localStorage.getItem('selectedLanguage') || 'sk';
        updateUI(savedLang);
        updateCartBadge();
        renderProducts();
    };

    window.onclick = function(event) {
        if (event.target.className === 'modal') event.target.style.display = "none";
    };
</script>

</body>
</html>
